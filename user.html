<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Player Management</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
<style>
  img.avatar {
    width: 50px;
    height: 50px;
    object-fit: cover;
    border-radius: 50%;
  }
</style>
</head>
<body class="bg-dark text-white p-3">

<div class="container-fluid">
  <h2 class="text-success mb-3">Player Management</h2>

  <div class="mb-3">
    <a href="{{ url_for('top_players') }}" class="btn btn-warning">View Top Players</a>
    <a href="{{ url_for('register_page') }}" class="btn btn-success">Register New Player</a>
  </div>

  <table class="table table-dark table-striped table-bordered">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Game</th>
        <th>Username</th>
        <th>Level</th>
        <th>Rank</th>
        <th>Team</th>
        <th>Role</th>
        <th>Favorite</th>
        <th>Avatar</th>
        <th>Date Registered</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for p in players %}
      <tr>
        <td>{{ p[0] }}</td>
        <td>{{ p[1] }}</td>
        <td>{{ p[2] }}</td>
        <td>{{ p[3] }}</td>
        <td>{{ p[4] }}</td>
        <td>{{ get_rank(p[4], p[2]) }}</td>
        <td>{{ p[5] }}</td>
        <td>{{ p[6] }}</td>
        <td>{{ p[7] }}</td>
        <td>
          {% if p[8] %}
          <img src="{{ url_for('static', filename=p[8]) }}" class="avatar">
          {% endif %}
        </td>
        <td>{{ p[9] }}</td>
        <td>
          <a href="{{ url_for('delete_player', player_id=p[0]) }}" class="btn btn-danger btn-sm mb-1">Delete</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

</body>
</html>
